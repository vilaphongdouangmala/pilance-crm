generator client {
    provider = "prisma-client"
    output   = "../prisma/generated"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

enum Role {
    ADMIN
    GENERAL
}

model User {
    id       String @id @default(cuid())
    email    String @unique
    password String

    firstName String?
    lastName  String?

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    organizations OrganizationMember[]
}

model Organization {
    id   String @id @default(cuid())
    name String
    slug String @unique

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    members OrganizationMember[]
}

model OrganizationMember {
    id   String @id @default(cuid())
    role Role   @default(GENERAL)

    userId String
    user   User   @relation(fields: [userId], references: [id])

    organizationId String
    organization   Organization @relation(fields: [organizationId], references: [id])

    createdAt DateTime @default(now())

    @@unique([userId, organizationId])
}
